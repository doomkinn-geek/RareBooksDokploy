# üî• Firebase - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–ª—è –î–µ–ø–µ—à–∞

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–°–æ–∑–¥–∞–Ω–∏–µ Firebase –ø—Ä–æ–µ–∫—Ç–∞](#1-—Å–æ–∑–¥–∞–Ω–∏–µ-firebase-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)](#3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ios-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloud Messaging (FCM)](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-cloud-messaging-fcm)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º](#5-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–±—ç–∫–µ–Ω–¥–æ–º)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#6-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [Troubleshooting](#7-troubleshooting)

---

## 1. –°–æ–∑–¥–∞–Ω–∏–µ Firebase –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1.1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Firebase Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.firebase.google.com/
2. –í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º Google –∞–∫–∫–∞—É–Ω—Ç–æ–º
3. –ù–∞–∂–º–∏—Ç–µ **"Add project"** (–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç)

### –®–∞–≥ 1.2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ

**–®–∞–≥ 1 –∏–∑ 3: –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
- Project name: `Depesha` –∏–ª–∏ `May Messenger`
- –ù–∞–∂–º–∏—Ç–µ **Continue**

**–®–∞–≥ 2 –∏–∑ 3: Google Analytics**
- –í–∫–ª—é—á–∏—Ç–µ Google Analytics (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
- –ù–∞–∂–º–∏—Ç–µ **Continue**

**–®–∞–≥ 3 –∏–∑ 3: Google Analytics account**
- –í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
- –ü—Ä–∏–º–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ù–∞–∂–º–∏—Ç–µ **Create project**

‚è±Ô∏è **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–π–º–µ—Ç 30-60 —Å–µ–∫—É–Ω–¥**

### –®–∞–≥ 1.3: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è

–ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "Your new project is ready", –Ω–∞–∂–º–∏—Ç–µ **Continue**

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 2.1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ **Android** (—Ä–æ–±–æ—Ç)
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ "Add Firebase to your Android app"

### –®–∞–≥ 2.2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã

**Android package name:** (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
```
com.depesha
```
‚ö†Ô∏è **–í–ê–ñ–ù–û:** –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `applicationId` –≤ `android/app/build.gradle`

**App nickname (optional):**
```
Depesha
```

**Debug signing certificate SHA-1 (optional):**
–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è Firebase Auth)

–ù–∞–∂–º–∏—Ç–µ **Register app**

### –®–∞–≥ 2.3: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

1. Firebase –ø–æ–∫–∞–∂–µ—Ç –∫–Ω–æ–ø–∫—É **Download google-services.json**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
3. **–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ `google-services.json` –≤:
   ```
   D:\_SOURCES\source\RareBooksServicePublic\_may_messenger_native_react\android\app\
   ```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
```
_may_messenger_native_react/
‚îî‚îÄ‚îÄ android/
    ‚îî‚îÄ‚îÄ app/
        ‚îú‚îÄ‚îÄ build.gradle
        ‚îú‚îÄ‚îÄ google-services.json  ‚Üê –°–Æ–î–ê!
        ‚îî‚îÄ‚îÄ src/
```

### –®–∞–≥ 2.4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Firebase SDK

Firebase –ø–æ–ø—Ä–æ—Å–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –û–Ω–∏ **–£–ñ–ï –£–°–¢–ê–ù–û–í–õ–ï–ù–´** –≤ –ø—Ä–æ–µ–∫—Ç–µ!

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã:

**android/build.gradle:**
```gradle
buildscript {
    dependencies {
        classpath 'com.google.gms:google-services:4.4.0'
    }
}
```

**android/app/build.gradle:**
```gradle
apply plugin: 'com.google.gms.google-services' // –í –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
```

–ï—Å–ª–∏ —ç—Ç–∏—Ö —Å—Ç—Ä–æ–∫ –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é.

–ù–∞–∂–º–∏—Ç–µ **Next**

### –®–∞–≥ 2.5: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase

Firebase –ø–æ–∫–∞–∂–µ—Ç –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –û–Ω **–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù** –≤:
- `App.tsx` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
- `src/services/fcmService.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ù–∞–∂–º–∏—Ç–µ **Next** ‚Üí **Continue to console**

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ iOS –≤–µ—Ä—Å–∏—é:

1. –í Firebase Console –Ω–∞–∂–º–∏—Ç–µ **Add app** ‚Üí iOS
2. iOS bundle ID: `com.depesha`
3. –°–∫–∞—á–∞–π—Ç–µ `GoogleService-Info.plist`
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `ios/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ CocoaPods –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   cd ios
   pod install
   cd ..
   ```

‚ö†Ô∏è **–î–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ iOS –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloud Messaging (FCM)

### –®–∞–≥ 4.1: –í–∫–ª—é—á–µ–Ω–∏–µ Cloud Messaging API

1. –í Firebase Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Project settings** (–∑–Ω–∞—á–æ–∫ ‚öôÔ∏è)
2. –í–∫–ª–∞–¥–∫–∞ **Cloud Messaging**
3. –ù–∞–π–¥–∏—Ç–µ **Cloud Messaging API (Legacy)** —Å—Ç–∞—Ç—É—Å
4. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "Disabled", –Ω–∞–∂–º–∏—Ç–µ **Enable**

### –®–∞–≥ 4.2: –ü–æ–ª—É—á–µ–Ω–∏–µ Server Key –¥–ª—è –±—ç–∫–µ–Ω–¥–∞

**Cloud Messaging API (Legacy):**
1. –í —Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ **Cloud Messaging**
2. –†–∞–∑–¥–µ–ª **Project credentials**
3. –ù–∞–π–¥–∏—Ç–µ **Server key**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `AAAA...`)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á - –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –±—ç–∫–µ–Ω–¥–∞!**

### –®–∞–≥ 4.3: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API –∫–ª—é—á–∞ (V1)

Firebase —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π API (HTTP v1):

1. –í **Cloud Messaging** –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Firebase Cloud Messaging API**
2. –ù–∞–∂–º–∏—Ç–µ **Manage API in Google Cloud Console**
3. –í–∫–ª—é—á–∏—Ç–µ **Firebase Cloud Messaging API**
4. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Firebase Console

### –®–∞–≥ 4.4: –°–æ–∑–¥–∞–Ω–∏–µ Service Account –¥–ª—è –±—ç–∫–µ–Ω–¥–∞

1. **Project settings** ‚Üí **Service accounts**
2. –ù–∞–∂–º–∏—Ç–µ **Generate new private key**
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –¥–∏–∞–ª–æ–≥–µ
4. –°–∫–∞—á–∞–µ—Ç—Å—è JSON —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `depesha-firebase-adminsdk-xxxxx.json`)
5. **–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª –≤ `firebase_config.json`

---

## 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º

### –®–∞–≥ 5.1: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `firebase_config.json` –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```bash
# Windows ‚Üí Linux —Å–µ—Ä–≤–µ—Ä
scp firebase_config.json user@server:/app/MayMessenger/firebase_config.json

# –ò–ª–∏ —á–µ—Ä–µ–∑ FileZilla/WinSCP
```

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```
/app/MayMessenger/
‚îú‚îÄ‚îÄ MayMessenger.API.dll
‚îú‚îÄ‚îÄ firebase_config.json  ‚Üê –°–Æ–î–ê
‚îî‚îÄ‚îÄ wwwroot/
```

### –®–∞–≥ 5.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞

–§–∞–π–ª: `appsettings.json` –∏–ª–∏ `appsettings.Production.json`

```json
{
  "Firebase": {
    "ConfigPath": "firebase_config.json"
  }
}
```

–ï—Å–ª–∏ —Ñ–∞–π–ª –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ:
```json
{
  "Firebase": {
    "ConfigPath": "/app/MayMessenger/config/firebase_config.json"
  }
}
```

### –®–∞–≥ 5.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
# Linux
sudo journalctl -u maymessenger -f | grep -i firebase

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# Firebase initialized from /app/MayMessenger/firebase_config.json
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Health Check:
```bash
curl https://messenger.rare-books.ru/health
```

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```json
{
  "checks": [
    {
      "name": "firebase",
      "status": "Healthy"
    }
  ]
}
```

---

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 6.1: –°–±–æ—Ä–∫–∞ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```powershell
cd D:\_SOURCES\source\RareBooksServicePublic\_may_messenger_native_react
.\build-android.ps1
```

### –®–∞–≥ 6.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ FCM —Ç–æ–∫–µ–Ω–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```powershell
adb logcat | Select-String "FCM"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[FCM] Token registered: e1A2B3C...
```

### –®–∞–≥ 6.3: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ß–µ—Ä–µ–∑ Firebase Console:**
1. **Engage** ‚Üí **Messaging** ‚Üí **Create your first campaign**
2. **Firebase Notification messages**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Notification title:** –¢–µ—Å—Ç
   - **Notification text:** –ü—Ä–∏–≤–µ—Ç –æ—Ç Firebase!
4. **Send test message**
5. –í–≤–µ–¥–∏—Ç–µ FCM —Ç–æ–∫–µ–Ω –∏–∑ –ª–æ–≥–æ–≤
6. **Test**

**–ß–µ—Ä–µ–∑ curl:**
```bash
curl -X POST https://fcm.googleapis.com/fcm/send \
  -H "Authorization: key=YOUR_SERVER_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "to": "FCM_TOKEN_HERE",
    "notification": {
      "title": "–¢–µ—Å—Ç",
      "body": "–ü—Ä–∏–≤–µ—Ç –æ—Ç Firebase!"
    }
  }'
```

### –®–∞–≥ 6.4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (background)
3. –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
4. –¢–∞–ø –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–∞—Ç

---

## 7. Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "google-services.json not found"

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
ls android\app\google-services.json

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–∫–∞—á–∞–π—Ç–µ —Å–Ω–æ–≤–∞ –∏–∑ Firebase Console:
# Project settings ‚Üí Your apps ‚Üí Android ‚Üí Download google-services.json
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Default FirebaseApp is not initialized"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `google-services.json`
2. –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω plugin –≤ `android/app/build.gradle`

**–†–µ—à–µ–Ω–∏–µ:**
```gradle
// android/app/build.gradle - –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
apply plugin: 'com.google.gms.google-services'
```

–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å:
```powershell
cd android
.\gradlew clean
cd ..
npm run android
```

### –ü—Ä–æ–±–ª–µ–º–∞: "API project not found"

**–ü—Ä–∏—á–∏–Ω–∞:** Cloud Messaging API –Ω–µ –≤–∫–ª—é—á–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. Firebase Console ‚Üí Project settings ‚Üí Cloud Messaging
2. **Manage API in Google Cloud Console**
3. **Enable Firebase Cloud Messaging API**

### –ü—Ä–æ–±–ª–µ–º–∞: Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?**
```bash
ls -la /app/MayMessenger/firebase_config.json
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
```bash
chmod 644 /app/MayMessenger/firebase_config.json
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON**
```bash
cat /app/MayMessenger/firebase_config.json | jq .
# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –±–µ–∑ –æ—à–∏–±–æ–∫
```

### –ü—Ä–æ–±–ª–µ–º–∞: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ß–µ–∫–ª–∏—Å—Ç:**
1. ‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ?
2. ‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?
3. ‚úÖ FCM —Ç–æ–∫–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω? (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î —Ç–∞–±–ª–∏—Ü—É FcmTokens)
4. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ background? (foreground —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É)
5. ‚úÖ Internet —Ä–∞–∑—Ä–µ—à–µ–Ω –≤ AndroidManifest.xml?

**–ü—Ä–æ–≤–µ—Ä–∫–∞ FCM —Ç–æ–∫–µ–Ω–∞ –≤ –ë–î:**
```sql
SELECT * FROM "FcmTokens" WHERE "UserId" = 'YOUR_USER_ID';
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Error 401: Unauthorized"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π Server Key

**–†–µ—à–µ–Ω–∏–µ:**
1. Firebase Console ‚Üí Project settings ‚Üí Cloud Messaging
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Server key** –∑–∞–Ω–æ–≤–æ
3. –û–±–Ω–æ–≤–∏—Ç–µ `firebase_config.json` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π HTTP v1 API

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- [ ] `google-services.json` –≤ `android/app/`
- [ ] `apply plugin: 'com.google.gms.google-services'` –≤ build.gradle
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] FCM —Ç–æ–∫–µ–Ω –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞

### –ë—ç–∫–µ–Ω–¥:
- [ ] `firebase_config.json` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (–ø—Ä–æ–≤–µ—Ä–∫–∞ `/health`)
- [ ] `FirebaseService.IsInitialized == true`

### Firebase Console:
- [ ] Android app –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º package name
- [ ] Cloud Messaging API –≤–∫–ª—é—á–µ–Ω
- [ ] Service Account –∫–ª—é—á —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–∞—á–∞–Ω

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–∑ Firebase Console —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- [ ] Tap –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Ç

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ production:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `google-services.json` –≤ Git
   - –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `firebase_config.json` –≤ Git
   - –î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firebase Analytics
   - –í–∫–ª—é—á–∏—Ç–µ Crashlytics –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firebase Performance Monitoring
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Topics –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ HTTP v1 API (–±–æ–ª–µ–µ –≥–∏–±–∫–∏–π)
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting –¥–ª—è FCM –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- Firebase Console: https://console.firebase.google.com/
- Firebase Documentation: https://firebase.google.com/docs
- React Native Firebase: https://rnfirebase.io/
- FCM HTTP v1 API: https://firebase.google.com/docs/cloud-messaging/migrate-v1

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 19 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü—Ä–æ–µ–∫—Ç:** –î–µ–ø–µ—à–∞ (May Messenger)

**–ì–æ—Ç–æ–≤–æ! –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –∏ Firebase –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å! üî•üöÄ**

