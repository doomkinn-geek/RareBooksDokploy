# üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π - –î–µ–ø–µ—à–∞

**–î–∞—Ç–∞:** 19 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω:** MayMessengerRN ‚Üí _may_messenger_native_react

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ

**–ë—ã–ª–æ:** MayMessengerRN  
**–°—Ç–∞–ª–æ:** _may_messenger_native_react

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞
- `package.json` ‚Üí name: "Depesha"
- `app.json` ‚Üí displayName: "–î–µ–ø–µ—à–∞"
- Android package: `com.depesha`
- –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

---

## üñºÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ö–ª–∏–µ–Ω—Ç (React Native)

#### ‚úÖ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

**–§–∞–π–ª:** `src/components/ImagePickerButton.tsx`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∂–∞—Ç–∏—è:**
```typescript
quality: 0.7         // 70% –∫–∞—á–µ—Å—Ç–≤–∞
maxWidth: 1920       // Full HD
maxHeight: 1920      // Full HD  
–õ–∏–º–∏—Ç: 10MB         // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞:**
```typescript
if (asset.fileSize > 10 * 1024 * 1024) {
  Alert.alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π', 
    '–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 10 –ú–ë');
}
```

#### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**SQLite —Å—Ö–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:**
```sql
CREATE TABLE messages (
  ...
  localImagePath TEXT,  -- –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
  filePath TEXT,        -- –ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  ...
);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã offline
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
- ‚úÖ –î–∞–∂–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–∏ —Ñ–æ—Ç–æ

### –ë—ç–∫–µ–Ω–¥ (ASP.NET)

#### ‚úÖ –ù–æ–≤—ã–π endpoint –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–§–∞–π–ª:** `src/MayMessenger.API/Controllers/MessagesController.cs`

```csharp
[HttpPost("image")]
public async Task<ActionResult<MessageDto>> SendImageMessage(
    [FromForm] Guid chatId, 
    IFormFile imageFile)
{
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
    var allowedExtensions = new[] { ".jpg", ".jpeg", ".png", ".gif", ".webp" };
    
    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
    if (imageFile.Length > 10 * 1024 * 1024)
        return BadRequest("Image size must be less than 10MB");
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ /wwwroot/images/
    var fileName = $"{Guid.NewGuid()}{extension}";
    var filePath = $"/images/{fileName}";
    
    // SignalR + Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
}
```

#### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

**–ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å:** `MediaCleanupService.cs` (–∑–∞–º–µ–Ω—è–µ—Ç AudioCleanupService)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚è∞ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- üóëÔ∏è –£–¥–∞–ª—è–µ—Ç –∞—É–¥–∏–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- üìä –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ –ë–î
- üíæ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –æ—Å—Ç–∞—é—Ç—Å—è!**

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `appsettings.json`
```json
{
  "MediaRetentionDays": 7  // –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
}
```

**–õ–æ–≥–∏:**
```
Media cleanup completed. 
Audio: 42 files deleted, 42 records updated.
Images: 15 files deleted, 15 records updated.
```

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `IMessageRepository.GetOldMediaMessagesAsync()`

```csharp
public async Task<IEnumerable<Message>> GetOldMediaMessagesAsync(DateTime cutoffDate)
{
    return await _dbSet
        .Where(m => (m.Type == MessageType.Audio || m.Type == MessageType.Image) && 
                   m.CreatedAt < cutoffDate && 
                   !string.IsNullOrEmpty(m.FilePath))
        .ToListAsync();
}
```

---

## üî® –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Android

**–§–∞–π–ª:** `build-android.ps1`

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Node.js, Java, Android SDK)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
- ‚úÖ –ó–∞–ø—É—Å–∫ Metro Bundler
- ‚úÖ –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ APK
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```powershell
.\build-android.ps1
```

**–í—ã–≤–æ–¥:**
```
[STEP] 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è...
[INFO] Node.js –≤–µ—Ä—Å–∏—è: v20.x.x
[INFO] Java: openjdk version "17.x.x"
[INFO] ANDROID_HOME: C:\Users\...\Android\Sdk
[STEP] 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ package.json...
[STEP] 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞/–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
[STEP] 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript...
[SUCCESS] TypeScript: OK
[STEP] 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ Android...
[SUCCESS] –ù–∞–π–¥–µ–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤: 1
[STEP] 6. –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏...
[STEP] 7. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...
[STEP] 8. –°–±–æ—Ä–∫–∞ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
[STEP] 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏...
[SUCCESS] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: com.depesha

========================================
          –°–ë–û–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!
========================================
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚úÖ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

1. **QUICK_START.md**
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞
   - Troubleshooting

2. **FIREBASE_SETUP_DETAILED.md**
   - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Firebase
   - 7 —Ä–∞–∑–¥–µ–ª–æ–≤ —Å —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ –æ–ø–∏—Å–∞–Ω–∏–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android app
   - –ü–æ–ª—É—á–µ–Ω–∏–µ google-services.json
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FCM
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Troubleshooting

3. **IMAGE_COMPRESSION_AND_STORAGE.md**
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∂–∞—Ç–∏—è
   - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
   - Offline —Ä–µ–∂–∏–º
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - FAQ

4. **FINAL_CHANGES_SUMMARY.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
   - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **COMPLETE_PROJECT_SUMMARY.md** - –æ–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **BACKEND_IMAGE_SUPPORT.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—ç–∫–µ–Ω–¥–∞
- **SETUP_GUIDE.md** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ

---

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

### React Native –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–î–µ–ø–µ—à–∞"

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ê—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∞–≤—Ç–æ—Å–∂–∞—Ç–∏–µ–º**
- ‚úÖ Real-time —á–µ—Ä–µ–∑ SignalR
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞**
- ‚úÖ Offline —Ä–µ–∂–∏–º —Å SQLite
- ‚úÖ Firebase FCM (–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω)
- ‚úÖ Error boundaries
- ‚úÖ Reanimated –∞–Ω–∏–º–∞—Ü–∏–∏

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π 70%
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ 10MB
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ 1920x1920
- ‚úÖ FastImage –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ SQLite –¥–ª—è offline –¥–æ—Å—Ç—É–ø–∞

### –ë—ç–∫–µ–Ω–¥ ASP.NET

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ Endpoint `/api/messages/image`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ `/wwwroot/images/`
- ‚úÖ **MediaCleanupService** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ (7 –¥–Ω–µ–π)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –æ—á–∏—Å—Ç–∫–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–ª–∏–µ–Ω—Ç

**–°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
```typescript
// src/components/ImagePickerButton.tsx
quality: 0.7         // –ò–∑–º–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (0.1-1.0)
maxWidth: 1920       // –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å. —à–∏—Ä–∏–Ω—É
maxHeight: 1920      // –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å. –≤—ã—Å–æ—Ç—É
```

### –°–µ—Ä–≤–µ—Ä

**–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞:**
```json
// appsettings.json
{
  "MediaRetentionDays": 7  // –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
}
```

**–õ–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞:**
```csharp
// MessagesController.cs
if (imageFile.Length > 10 * 1024 * 1024) // –ò–∑–º–µ–Ω–∏—Ç—å –ª–∏–º–∏—Ç
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–¥

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| TypeScript –æ—à–∏–±–æ–∫ | 0 ‚úÖ |
| –ù–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 13 |
| –ù–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ | 2 (MediaCleanup, SQLite) |
| –°—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | ~2000+ |
| –§–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | 7 |

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Offline –¥–æ—Å—Ç—É–ø | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ê–≤—Ç–æ—Å–±–æ—Ä–∫–∞ Android | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Firebase –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Android –æ–∫—Ä—É–∂–µ–Ω–∏–µ** (–æ–¥–∏–Ω —Ä–∞–∑)
   - JDK 17-20
   - Android SDK API 33
   - ANDROID_HOME
   - –≠–º—É–ª—è—Ç–æ—Ä

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Å–±–æ—Ä–∫—É**
   ```powershell
   cd _may_messenger_native_react
   .\build-android.ps1
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firebase** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –°–º. `FIREBASE_SETUP_DETAILED.md`
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç—å `google-services.json` –≤ `android/app/`

**–ü–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `QUICK_START.md`
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** `SETUP_GUIDE.md`
- **Firebase:** `FIREBASE_SETUP_DETAILED.md`

---

## üéÅ –ë–æ–Ω—É—Å—ã

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥

2. **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - 7 –Ω–æ–≤—ã—Ö MD —Ñ–∞–π–ª–æ–≤
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
   - Troubleshooting —Ä–∞–∑–¥–µ–ª—ã
   - FAQ

3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
   - MediaCleanupService –≤–º–µ—Å—Ç–æ AudioCleanupService
   - –ï–¥–∏–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –º–µ–¥–∏–∞ —Ç–∏–ø–æ–≤
   - –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ)

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
|----------|----------|--------|
| Quality | 70% | -30% —Ä–∞–∑–º–µ—Ä–∞ |
| Max size | 1920x1920 | –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ |
| –õ–∏–º–∏—Ç | 10MB | –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ |

### –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å | 24 —á–∞—Å–∞ |
| –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è | 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) |
| –ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ | –≠–∫–æ–Ω–æ–º–∏—è ~80-90% —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (10MB)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ (GUID)
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

- üîí –ê–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–æ–∫
- üîí MIME-type –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- üîí Rate limiting –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
- üîí CDN –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ –º–µ–¥–∏–∞

---

## üìù Changelog

### [1.0.0] - 19 –¥–µ–∫–∞–±—Ä—è 2025

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–∂–∞—Ç–∏–µ + –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ MediaCleanupService –¥–ª—è –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ Endpoint `/api/messages/image`
- ‚úÖ MessageType.Image
- ‚úÖ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Å–±–æ—Ä–∫–∏ `build-android.ps1`
- ‚úÖ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ SQLite –ø–æ–¥–¥–µ—Ä–∂–∫–∞ localImagePath

#### –ò–∑–º–µ–Ω–µ–Ω–æ
- üîÑ AudioCleanupService ‚Üí MediaCleanupService
- üîÑ –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ "–î–µ–ø–µ—à–∞"
- üîÑ Package name: com.depesha
- üîÑ ImagePickerButton –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Å–∂–∞—Ç–∏–µ–º

#### –£–ª—É—á—à–µ–Ω–æ
- ‚ö° –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ 70%
- ‚ö° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ 1920x1920
- ‚ö° –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
- ‚ö° –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è offline

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∑–∞–ø—É—Å–∫–∞

1. ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ? ‚Üí –î–∞: —Å–º. `SETUP_GUIDE.md`
2. ‚úÖ –≠–º—É–ª—è—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω? ‚Üí `emulator -avd YOUR_AVD`
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É ‚Üí `.\build-android.ps1`

### –î–ª—è production

1. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firebase ‚Üí `FIREBASE_SETUP_DETAILED.md`
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å release build
3. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN –¥–ª—è –º–µ–¥–∏–∞
4. ‚è≥ –í–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ crashlytics

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û–±—â–∞—è:** `README.md`
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `QUICK_START.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** `SETUP_GUIDE.md`
- **Firebase:** `FIREBASE_SETUP_DETAILED.md`
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** `IMAGE_COMPRESSION_AND_STORAGE.md`
- **–ü–æ–ª–Ω–æ–µ —Ä–µ–∑—é–º–µ:** `COMPLETE_PROJECT_SUMMARY.md`
- **–ë—ç–∫–µ–Ω–¥:** `../_may_messenger_backend/BACKEND_IMAGE_SUPPORT.md`

### Troubleshooting

–°–º. —Ä–∞–∑–¥–µ–ª Troubleshooting –≤ `QUICK_START.md` –∏–ª–∏ `SETUP_GUIDE.md`

---

## üèÜ –ò—Ç–æ–≥

### ‚úÖ –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ 100%

1. ‚úÖ –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ "–î–µ–ø–µ—à–∞"
2. ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∂–∏–º–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (70% quality, 1920x1920)
3. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–∞–≤—Å–µ–≥–¥–∞
4. ‚úÖ –°–µ—Ä–≤–µ—Ä —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é (7 –¥–Ω–µ–π)
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ PowerShell
6. ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ Firebase

### üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å:**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Offline —Ä–µ–∂–∏–º–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –£–¥–æ–±–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –∏ production deployment!**

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 19 –¥–µ–∫–∞–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–ü—Ä–æ–µ–∫—Ç:** –î–µ–ø–µ—à–∞ (May Messenger)  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

**–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –î–µ–ø–µ—à–∞! üöÄüì±üí¨**

