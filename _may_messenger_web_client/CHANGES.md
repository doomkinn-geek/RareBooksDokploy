# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–∞ May Messenger

**–î–∞—Ç–∞:** 22 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É–∑—ã—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞ (70% –∏–ª–∏ –º–∞–∫—Å 500px)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ 80px

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ Sending (Clock —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π)
- ‚úÖ Sent (–æ–¥–Ω–∞ –≥–∞–ª–æ—á–∫–∞)
- ‚úÖ Delivered (–¥–≤–µ —Å–µ—Ä—ã–µ –≥–∞–ª–æ—á–∫–∏)
- ‚úÖ Read (–¥–≤–µ –∑–µ–ª—ë–Ω—ã–µ –≥–∞–ª–æ—á–∫–∏)
- ‚úÖ **Played (—Å–∏–Ω–∏–π –¥–∏–Ω–∞–º–∏–∫)** - –ù–û–í–´–ô!
- ‚úÖ Failed (–∫—Ä–∞—Å–Ω–∞—è –æ—à–∏–±–∫–∞ + –∫–Ω–æ–ø–∫–∞ Retry)

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ Preview –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —á–∞—Ç–µ (200x200px)
- ‚úÖ –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ –∫–ª–∏–∫—É
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å—ã
- ‚úÖ "–æ–Ω–ª–∞–π–Ω" —Å –∑–µ–ª—ë–Ω—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∞–≤–∞—Ç–∞—Ä–µ –≤ —Å–ø–∏—Å–∫–µ —á–∞—Ç–æ–≤
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ SignalR

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤ –ø—É–∑—ã—Ä–µ
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–µ—Ö–∞–Ω–∏–∑–º Retry –¥–ª—è failed —Å–æ–æ–±—â–µ–Ω–∏–π

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
src/
‚îú‚îÄ‚îÄ types/chat.ts                       [UPDATED] - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã Image, Played, –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å—ã
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ message/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageBubble.tsx          [UPDATED] - –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MessageInput.tsx           [UPDATED] - –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ chat/
‚îÇ       ‚îú‚îÄ‚îÄ ChatWindow.tsx             [UPDATED] - –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å
‚îÇ       ‚îî‚îÄ‚îÄ ChatList.tsx               [UPDATED] - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ messageStore.ts                [UPDATED] - sendImageMessage, retry
‚îÇ   ‚îî‚îÄ‚îÄ chatStore.ts                   [UPDATED] - –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å—ã
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ signalRService.ts              [UPDATED] - UserOnlineStatusChanged
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ messageApi.ts                  [UPDATED] - sendImageMessage
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ constants.ts                   [UPDATED] - API_BASE_URL, SEND_IMAGE
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ _may_messenger_web_client

# Development
npm run dev

# Production build
npm run build

# Preview production build
npm run preview
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### MessageStatus enum
```typescript
// –ë–´–õ–û:
Failed = 4

// –°–¢–ê–õ–û:
Played = 4
Failed = 5
```

### MessageType enum
```typescript
// –î–û–ë–ê–í–õ–ï–ù–û:
Image = 2
```

### Chat interface
```typescript
// –î–û–ë–ê–í–õ–ï–ù–û:
otherParticipantId?: string;
otherParticipantIsOnline?: boolean;
otherParticipantLastSeenAt?: string;
```

## üîÑ Backend —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è:
1. ‚úÖ Backend –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `MessageStatus.Played = 4`
2. ‚úÖ Backend endpoint `/messages/image` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. ‚úÖ SignalR —Å–æ–±—ã—Ç–∏–µ `UserOnlineStatusChanged`
4. ‚úÖ –ü–æ–ª—è `otherParticipantId`, `otherParticipantIsOnline`, `otherParticipantLastSeenAt` –≤ Chat –º–æ–¥–µ–ª–∏

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä (0 –æ—à–∏–±–æ–∫)
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã

### –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
- [ ] Retry –º–µ—Ö–∞–Ω–∏–∑–º
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–æ–≤
- [ ] –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ UI
// 1. –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É Image
// 2. –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞
// 3. Preview
// 4. –ö–ª–∏–∫ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
```

### Retry failed —Å–æ–æ–±—â–µ–Ω–∏—è
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ UI
// –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –ø–æ–¥ failed —Å–æ–æ–±—â–µ–Ω–∏–µ–º
```

### –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ UI
// –ö–ª–∏–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- **–ü—É–∑—ã—Ä–∏:** –¢–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
- **–°—Ç–∞—Ç—É—Å—ã:** –í—Å–µ 6 —Å—Ç–∞—Ç—É—Å–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** 200x200px —Å rounded —É–≥–ª–∞–º–∏
- **–û–Ω–ª–∞–π–Ω:** –ó–µ–ª—ë–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä + –ø—É–ª—å—Å–∞—Ü–∏—è
- **–ò–º—è:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `_WEB_CLIENT_ALIGNMENT_PRD.md` - –ü–æ–ª–Ω–æ–µ PRD —Å –¥–µ—Ç–∞–ª—è–º–∏
- `_WEB_CLIENT_IMPLEMENTATION_SUMMARY.md` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

---

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º –∏ –Ω–µ –ª–æ–º–∞—é—Ç —Ç–µ–∫—É—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.**

