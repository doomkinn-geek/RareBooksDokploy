# Telegram Bot Test Application

Это тестовое приложение для отладки и тестирования Telegram бота.

## Возможности

1. **Проверка подключения к боту (getMe)** - проверяет, что бот активен и доступен
2. **Отправка тестового сообщения** - отправляет тестовое сообщение в указанный чат
3. **Тестирование клавиатуры** - отправляет сообщение с inline клавиатурой
4. **Симуляция webhook обновлений** - имитирует получение обновлений от Telegram

## Как использовать

### 1. Получение своего Telegram ID

Чтобы получить свой Telegram ID для тестирования:

1. Найдите бота @RareBooksReminderBot в Telegram
2. Напишите ему `/start`
3. Бот пришлёт вам ваш ID

Или используйте @userinfobot для получения своего ID.

### 2. Запуск приложения

```bash
cd TelegramBotTest
dotnet run
```

### 3. Тестирование функций

#### Проверка подключения (опция 1)
- Проверяет, что токен бота корректный
- Показывает информацию о боте

#### Отправка сообщения (опция 2)
- Введите ваш Telegram ID
- Бот отправит вам тестовое сообщение

#### Тестирование клавиатуры (опция 3)
- Введите ваш Telegram ID
- Бот отправит сообщение с кнопками
- Попробуйте нажать кнопки в Telegram

#### Симуляция webhook (опция 4)
- Показывает, как должны обрабатываться обновления
- Демонстрирует различные типы сообщений

## Отладка

### Если бот не отвечает:

1. Проверьте токен бота в коде
2. Убедитесь, что бот не заблокирован
3. Проверьте подключение к интернету

### Если получаете ошибку 403:

- Убедитесь, что вы написали боту `/start` перед тестированием
- Проверьте правильность Telegram ID

### Если webhook не работает:

- В реальном приложении нужно настроить webhook URL
- Используйте ngrok для локального тестирования
- Проверьте, что URL доступен извне

## Структура обновлений Telegram

Примеры JSON структур, которые Telegram отправляет:

### Текстовое сообщение:
```json
{
  "update_id": 123456789,
  "message": {
    "message_id": 123,
    "from": {
      "id": 987654321,
      "is_bot": false,
      "first_name": "John",
      "username": "john_doe"
    },
    "chat": {
      "id": 987654321,
      "type": "private"
    },
    "date": 1703875200,
    "text": "/start"
  }
}
```

### Callback Query (нажатие кнопки):
```json
{
  "update_id": 123456789,
  "callback_query": {
    "id": "unique_callback_id",
    "from": {
      "id": 987654321,
      "is_bot": false,
      "first_name": "John",
      "username": "john_doe"
    },
    "message": {
      "message_id": 123,
      "chat": {
        "id": 987654321,
        "type": "private"
      }
    },
    "data": "create_notification"
  }
}
```

## Следующие шаги

После успешного тестирования базовых функций:

1. Настройте webhook в основном приложении
2. Протестируйте интеграцию с базой данных
3. Проверьте работу состояний пользователей
4. Убедитесь в корректности обработки ошибок
