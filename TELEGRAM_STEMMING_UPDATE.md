# üîç –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–∏—Å–∫–∞ –≤ Telegram –±–æ—Ç–µ - –§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø

## üéØ **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ **–õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞** –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å RegularBaseBooksRepository
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è —Å—Ç–µ–º–º–∏–Ω–≥–∞  
- ‚úÖ **–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º** –∏—Å—Ö–æ–¥–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ (—Ç–µ–≥–∏ –Ω–µ —Å—Ç–µ–º–º–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç–µ–º–º–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–µ–≥–∏ –Ω–∞–π–¥—É—Ç –∫–Ω–∏–≥–∏

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `Iveonik.Stemmers` - —Å—Ç–µ–º–º–∏–Ω–≥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- `LanguageDetection` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è —è–∑—ã–∫–∞

### **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `PreprocessText(string text, out string detectedLanguage)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å—Ç–µ–º–º–∏–Ω–≥–æ–º
- `DetectLanguage(string text)` - –¥–µ—Ç–µ–∫—Ü–∏—è —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞:**
1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤**: –∫–∞–∂–¥–æ–µ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ –æ–±—Ä–∞–∑—É–µ—Ç –≥—Ä—É–ø–ø—É —Å—Ç–µ–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π
2. **AND –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏, OR –≤–Ω—É—Ç—Ä–∏**: –≤—Å–µ –≥—Ä—É–ø–ø—ã –¥–æ–ª–∂–Ω—ã –Ω–∞–π—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, –ª—é–±–æ–µ —Å–ª–æ–≤–æ –≤ –≥—Ä—É–ø–ø–µ
3. **–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º –∏—Å—Ö–æ–¥–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: —Ç–µ–≥–∏ –Ω–µ —Å—Ç–µ–º–º–∏—Ä–æ–≤–∞–Ω—ã, –ø–æ–∏—Å–∫ –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
4. **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–µ–º–º–∏–Ω–≥ –∏ –≥–¥–µ –Ω–∞–π–¥–µ–Ω—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

## üìÑ **–§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:**
```
RareBooksService.WebApi/Services/TelegramBotService.cs
```

## üöÄ **–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

### **1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞:**
```bash
scp RareBooksService.WebApi/Services/TelegramBotService.cs user@server:/path/to/rarebooks/RareBooksService.WebApi/Services/
```

### **2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```bash
cd /path/to/rarebooks
docker compose restart backend
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞:**
```bash
docker compose logs backend | tail -20
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:**

### **–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç:**
1. –í Telegram –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/lots` –±–æ—Ç—É
2. **–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–∏–≥–∏ –ì–µ–ª—å–º–≥–æ–ª—å—Ü–∞**  
3. –ï—Å–ª–∏ –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### **–ß—Ç–æ –ø–æ–∫–∞–∂—É—Ç –ª–æ–≥–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–∏—Å–∫–µ:**
```bash
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –¢–ï–°–¢ '–≥–µ–ª—å–º–æ–ª—å—Ç' -> —Å—Ç–µ–º–º–∏–Ω–≥: '–≥–µ–ª—å–º'
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: ‚úì –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å '–≥–µ–ª—å–º': title=True
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: ‚úì –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ —Ç–µ–≥–∞—Ö —Å '–≥–µ–ª—å–º–æ–ª—å—Ç': –≥–µ–ª—å–º–æ–ª—å—Ç
–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 5 –∫–Ω–∏–≥ –∏–∑ 291 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö
```

### **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏
docker logs rarebooks_backend | grep "–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê" | tail -20

# –ü–æ–∫–∞–∑–∞—Ç—å –æ–±—â–∏–µ –ª–æ–≥–∏ Telegram –±–æ—Ç–∞  
docker logs rarebooks_backend | grep "TelegramBotService" | tail -30
```

## üìä **–ù–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å—Ç–µ–º–º–∏–Ω–≥–∞:**
```bash
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: '–≥–µ–ª—å–º–æ–ª—å—Ç' -> —è–∑—ã–∫: rus -> —Å—Ç–µ–º–º–∏–Ω–≥: '–≥–µ–ª—å–º' -> —á–∞—Å—Ç–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞: [–≥–µ–ª—å–º]
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ò—Ç–æ–≥–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞: [[–≥–µ–ª—å–º]]
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤–∞—Ö:**
```bash  
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –¢–ï–°–¢ '–∫–Ω–∏–≥–∞' -> —è–∑—ã–∫: rus -> —Å—Ç–µ–º–º–∏–Ω–≥: '–∫–Ω–∏–≥'
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –¢–ï–°–¢ '–ø—É—à–∫–∏–Ω' -> —è–∑—ã–∫: rus -> —Å—Ç–µ–º–º–∏–Ω–≥: '–ø—É—à–∫–∏–Ω'
```

**–î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–∏–≥:**
```bash
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ì—Ä—É–ø–ø–∞ 1 [–≥–µ–ª—å–º]: True
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: ‚úì –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å '–≥–µ–ª—å–º': title=True, desc=False  
–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –¢–µ–≥–∏ –∫–Ω–∏–≥–∏: [–≥–µ–ª—å–º–æ–ª—å—Ç, –∏—Å—Ç–æ—Ä–∏—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞]
```

## üîß **–û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º:**

### **–ï—Å–ª–∏ —Å—Ç–µ–º–º–∏–Ω–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ NuGet –ø–∞–∫–µ—Ç—ã** –≤ `RareBooksService.WebApi.csproj`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend** –ø–æ–ª–Ω–æ—Å—Ç—å—é: `docker compose down && docker compose up -d`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ —è–∑—ã–∫–∞** –≤ –∫–æ–Ω—Å–æ–ª–∏ Docker

### **–ï—Å–ª–∏ –ø–æ–∏—Å–∫ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è NormalizedTitle/NormalizedDescription** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã** –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å—Ç–µ–º–º–∏–Ω–≥–∞** –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
