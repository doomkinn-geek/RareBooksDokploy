# ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è messenger.rare-books.ru –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Let's Encrypt –¥–ª—è –¥–æ–º–µ–Ω–∞ `messenger.rare-books.ru`.

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### üîß –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

1. **`scripts/get_messenger_certificate.sh`**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è messenger.rare-books.ru
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–ø–æ–∫
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

2. **`scripts/renew_all_certificates.sh`**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ cron –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

3. **`scripts/pre_certificate_check.sh`**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç DNS, nginx, Docker, –ø–æ—Ä—Ç—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ
   - –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

4. **`scripts/check_certificates.sh`**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –¥–∏—Å–∫ –∏ —Å–µ—Ç—å
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

5. **`scripts/QUICK_START.md`**
   - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ 5 –º–∏–Ω—É—Ç
   - –ú–∏–Ω–∏–º—É–º —Ç–µ–∫—Å—Ç–∞, –º–∞–∫—Å–∏–º—É–º –¥–µ–π—Å—Ç–≤–∏–π
   - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

6. **`scripts/CERTIFICATE_SETUP_INSTRUCTIONS.md`**
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏
   - Troubleshooting –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –∏ –æ–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

7. **`scripts/COMMANDS_CHEATSHEET.md`**
   - –®–ø–∞—Ä–≥–∞–ª–∫–∞ —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
   - –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã
   - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

8. **`scripts/README.md`**
   - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ —á–µ–∫–ª–∏—Å—Ç

9. **`CERTIFICATE_CHANGES_SUMMARY.md`**
   - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

10. **`–ò–¢–û–ì–ò_–ù–ê–°–¢–†–û–ô–ö–ò_SSL.md`** (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
    - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
    - –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### ‚öôÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

11. **`nginx/nginx_prod.conf`**
    - –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –¥–ª—è messenger.rare-books.ru
    - –ë—ã–ª–æ: `/etc/letsencrypt/live/rare-books.ru/`
    - –°—Ç–∞–ª–æ: `/etc/letsencrypt/live/messenger.rare-books.ru/`

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

#### 1Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /home/docker/RareBooksDokploy  # –∏–ª–∏ –≤–∞—à –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
git pull  # –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é
```

#### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

```bash
chmod +x scripts/pre_certificate_check.sh
sudo scripts/pre_certificate_check.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è –∏ –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫).

#### 3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
chmod +x scripts/get_messenger_certificate.sh
sudo scripts/get_messenger_certificate.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
sudo mkdir -p /var/www/certbot
sudo certbot certonly --webroot -w /var/www/certbot -d messenger.rare-books.ru
```

#### 4Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx

```bash
docker-compose restart proxy
```

#### 5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
# –° –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞
chmod +x scripts/check_certificates.sh
sudo scripts/check_certificates.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
curl -I https://messenger.rare-books.ru/health
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://messenger.rare-books.ru/swagger
```

#### 6Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–µ
nano scripts/renew_all_certificates.sh
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
sudo cp scripts/renew_all_certificates.sh /usr/local/bin/
sudo chmod +x /usr/local/bin/renew_all_certificates.sh

# 3. –î–æ–±–∞–≤—å—Ç–µ –≤ cron
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 3 * * * /usr/local/bin/renew_all_certificates.sh >> /var/log/renew_cert.log 2>&1

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
sudo /usr/local/bin/renew_all_certificates.sh
cat /var/log/renew_cert.log
```

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

- ‚úÖ –£ –≤–∞—Å –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è `messenger.rare-books.ru`
- ‚úÖ HTTPS –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–µ–ª–µ–Ω—ã–π –∑–∞–º–æ—á–µ–∫ üîí
- ‚úÖ API –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: https://messenger.rare-books.ru/api
- ‚úÖ Swagger UI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: https://messenger.rare-books.ru/swagger
- ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 60 –¥–Ω–µ–π
- ‚úÖ –£ –≤–∞—Å –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```
/etc/letsencrypt/live/
‚îú‚îÄ‚îÄ rare-books.ru/
‚îÇ   ‚îú‚îÄ‚îÄ fullchain.pem     ‚Üê –î–ª—è rare-books.ru –∏ www.rare-books.ru
‚îÇ   ‚îî‚îÄ‚îÄ privkey.pem
‚îî‚îÄ‚îÄ messenger.rare-books.ru/
    ‚îú‚îÄ‚îÄ fullchain.pem     ‚Üê –î–ª—è messenger.rare-books.ru (–ù–û–í–´–ô)
    ‚îî‚îÄ‚îÄ privkey.pem       ‚Üê –î–ª—è messenger.rare-books.ru (–ù–û–í–´–ô)
```

**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥—ã–π –¥–æ–º–µ–Ω —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç!

---

## üîç –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
nslookup messenger.rare-books.ru

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP
curl -I http://messenger.rare-books.ru

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
curl -I https://messenger.rare-books.ru/health

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect messenger.rare-books.ru:443 -servername messenger.rare-books.ru </dev/null 2>/dev/null | openssl x509 -noout -subject
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: subject=CN = messenger.rare-books.ru

# 5. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# https://messenger.rare-books.ru/swagger
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–º–æ—á–µ–∫ - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–º
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —á—Ç–µ–Ω–∏—è

### –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞:
1. üìÑ `scripts/QUICK_START.md` - –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å (5 –º–∏–Ω—É—Ç)
2. üìÑ `scripts/CERTIFICATE_SETUP_INSTRUCTIONS.md` - –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–Ω—è—Ç—å –¥–µ—Ç–∞–ª–∏
3. üìÑ `scripts/COMMANDS_CHEATSHEET.md` - –¥–µ—Ä–∂–∏—Ç–µ –ø–æ–¥ —Ä—É–∫–æ–π –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏

### –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. üîß `scripts/pre_certificate_check.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
2. üîß `scripts/get_messenger_certificate.sh` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
3. üîß `scripts/check_certificates.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
4. üîß `scripts/renew_all_certificates.sh` - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤ cron)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. DNS –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω
–ü–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å—å `messenger.rare-books.ru` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
nslookup messenger.rare-books.ru
```

### 2. Nginx –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
–î–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è challenge-—Ç–µ—Å—Ç–∞ Certbot –Ω—É–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—é—â–∏–π nginx:
```bash
docker ps | grep nginx
```

### 3. –ü—É—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –≤ `scripts/renew_all_certificates.sh` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –≤ cron!

### 4. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt –¥–µ–π—Å—Ç–≤—É—é—Ç 90 –¥–Ω–µ–π
–ù–æ –Ω–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∏—Ö –∫–∞–∂–¥—ã–µ 60 –¥–Ω–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞?
‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç–µ `scripts/pre_certificate_check.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞?
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ nginx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:
```bash
docker exec nginx_container cat /etc/nginx/nginx.conf | grep -A3 "messenger.rare-books.ru"
docker-compose restart proxy
```

### 502 Bad Gateway?
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend:
```bash
docker logs maymessenger_backend --tail 100
docker-compose restart maymessenger_backend
```

### –î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã?
‚Üí –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª Troubleshooting –≤ `scripts/CERTIFICATE_SETUP_INSTRUCTIONS.md`

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo scripts/check_certificates.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ nginx
docker logs nginx_container --tail 100 -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ messenger
docker logs maymessenger_backend --tail 100 -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
cat /var/log/renew_cert.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx
docker-compose restart proxy

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates

# –¢–µ—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot renew --dry-run
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã. –¢–µ–ø–µ—Ä—å:

1. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ `scripts/QUICK_START.md`
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
5. ‚úÖ –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ä–∞–±–æ—Ç–∞—é—â–∏–º HTTPS! üîí

---

## üåü –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω—ã —Å —É—á–µ—Ç–æ–º best practices:
- üé® –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- üìù –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- üìö –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üîÑ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024  
**–ü—Ä–æ–µ–∫—Ç:** RareBooks + MayMessenger  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

---

## üí¨ –í–æ–ø—Ä–æ—Å—ã?

–í—Å–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- `scripts/CERTIFICATE_SETUP_INSTRUCTIONS.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `scripts/COMMANDS_CHEATSHEET.md` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥
- `CERTIFICATE_CHANGES_SUMMARY.md` - –∏—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–£–¥–∞—á–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π! üöÄ**

